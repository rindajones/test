# AGV台数最適化デモ（ver0.1仮説ベース）

## 目的
480分間（8時間）で160個の搬送を達成するために、各AGVラインに必要な最小台数を求める。

本資料は、現場資料に基づく仮説と、数理最適化モデル（CP-SAT）に基づく試算結果を元に作成。

---

## 仮説ベースの構造定義

### 全体フロー

```
[002 入荷品置き場] 
   ↓ （003 AGV）
[004 デバンニング待ち] → デバンニング処理（005）
   ↓ （007 AGV）
[008 加工待ち] → 加工処理（009）
   ↓ （011 AGV）
[012 バンニング待ち] → バンニング処理（013）
   ↓ （015 AGV）
[016 出荷]
```

---

## 各AGVラインの仮定

| AGV | 区間 | 最大積載 | 基本搬送時間（仮） | 待機処理 | 待機時間（仮） |
|--|--|--|--|--|--|
| 003 | 入荷 → デバン | 1個 | 6分 | デバンニング（005） | **5分** |
| 007 | 部品 → 加工 | 10個 | 12分 | 加工（009） | **10分**（→仮に1分に変更して試算） |
| 011 | 加工品 → バンニング | 10個 | 12分 | バンニング（013） | **5分** |
| 015 | 出荷品 → 出荷 | 1個 | 6分 | なし | 0分 |

---

## 試算条件（ver0.1）
- CP-SATを使用し、搬送数160個を満たすための最小AGV台数を求めた
- 中間処理時間（待ち）は固定値として含めた
- 加工工程だけ1分に短縮して、他にボトルネックがあるか検証

---

## 最適化結果（ver0.1）

```
AGV 003: 4 台 | 1サイクル 11 分 | 最大搬送 172 個
AGV 007: 1 台 | 1サイクル 13 分 | 最大搬送 360 個
AGV 011: 1 台 | 1サイクル 17 分 | 最大搬送 280 個
AGV 015: 2 台 | 1サイクル 6 分 | 最大搬送 160 個
合計 AGV 台数: 8
```

---

## 読み解き
- 加工時間（009）を短縮しても、**AGV台数は減らず**
- ボトルネックは**積載数1の003と015**にあり
- 積載10の007と011は**明らかに余力あり**（搬送キャパ2倍以上）

---

## 現場的仮説：確認したい点

- AGVは区間専用？それとも複数工程を跨ぐ？
- 搬送の途中で“待ち”が発生するルールや優先順位はあるか？
- 実際のデバン・加工・バンニングの処理時間は？
- 出荷物数のばらつきや混雑は、モデルにどう影響しそうか？
- 各区間の“戻り”時間も対称か、それとも異なる可能性があるか？

---

## 今後の展開（ver0.2以降の検討）

- 「待ち時間」を**確率分布（ガンマ or 指数）でモデル化**
- AGV台数を固定し、「処理時間の上限値」を逆算する最適化
- 合計台数制約（例：5台以内）での**割当最適化モデル**への発展

---

## 備考
- 本資料のモデルは、現場資料を元に仮定構造で構築。
- 本試算は構造の整合性・負荷分布・律速工程の判定を目的としており、
  実運用の最終台数とは異なる可能性がある。


